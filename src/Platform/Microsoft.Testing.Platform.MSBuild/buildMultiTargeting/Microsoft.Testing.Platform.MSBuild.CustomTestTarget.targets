<Project>
  <!-- Expose a test target usable by tests projects where this target is injected -->
  <Target Name="Test" Condition=" '$(UseMSBuildTestInfrastructure)' != 'true' ">
    <!-- Multiple TFMs: we call _MTPTestTargetMultiTargeting which builds and dispatches to inner builds -->
    <CallTarget Targets="_MTPTestTargetMultiTargeting" Condition=" '$(TargetFramework)' == '' "/>

    <!-- Single TFM: we build and then call directly our target -->
    <CallTarget Targets="Build" Condition=" '$(TargetFrameworks)' == '' " />
    <CallTarget Targets="InvokeTestingPlatform" Condition=" '$(TargetFrameworks)' == '' "/>
  </Target>
</Project>
